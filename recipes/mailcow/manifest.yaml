id: mailcow
name: Mailcow
description: Full-featured open-source mail server (Postfix, Dovecot, Roundcube, Rspamd, SOGo, Nginx, Redis, MariaDB, etc.)
icon: mailcow.png
version: "2026.02"
category: email

# Official upstream compose repo
compose:
  repo: "https://github.com/mailcow/mailcow-dockerized.git"
  branch: "master"
  composeFile: "docker-compose.yml"
  # envFile is generated by generate_config.sh

# Setup steps (RecipeRunner will run these in order on first install)
setup:
  - type: git-clone
  - type: shell
    command: "./generate_config.sh"
    cwd: "${APP_DIR}"
    # generate_config.sh will ask for domain, etc. â€” your UI can pre-fill env vars if you want

# Commands your RecipeRunner uses
commands:
  start: "docker compose -f ${COMPOSE_FILE} up -d"
  stop: "docker compose -f ${COMPOSE_FILE} down"
  restart: "docker compose -f ${COMPOSE_FILE} restart"
  status: "docker compose -f ${COMPOSE_FILE} ps"
  update: "git pull && docker compose -f ${COMPOSE_FILE} pull && docker compose -f ${COMPOSE_FILE} up -d"
  logs: "docker compose -f ${COMPOSE_FILE} logs --tail=100"

# UI / Browser integration
defaultPort: 8080
adminPath: "/mailcow"
webmailPath: "/webmail"
openInBrowser: true

# Optional extra URLs (your tray menu or UI can show these)
extraUrls:
  - label: "Roundcube Webmail"
    url: "http://localhost:8080/webmail"
  - label: "SOGo Calendar"
    url: "http://localhost:8080/SOGo"
  - label: "Admin Panel (direct)"
    url: "http://localhost:8080/mailcow"

# Optional environment variables your runner can inject before setup
env:
  DOMAIN: "yourdomain.com"
  SKIP_LETS_ENCRYPT: "n"
